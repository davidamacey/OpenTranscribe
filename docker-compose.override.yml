# Docker Compose Override for Development
# This file is automatically loaded by docker-compose
# Use for development-specific configurations

version: '3.8'

services:
  # Development overrides for backend
  backend:
    build:
      dockerfile: Dockerfile.dev
      args:
        - BUILD_ENV=development
    volumes:
      # Full source code mounting for development
      - ./backend:/app:cached
    environment:
      - BUILD_ENV=development
    command: /app/entrypoint.sh

  # Development overrides for celery worker  
  celery-worker:
    build:
      dockerfile: Dockerfile.dev
      args:
        - BUILD_ENV=development
    volumes:
      - ./backend:/app:cached
    environment:
      - BUILD_ENV=development

  # Development overrides for frontend
  frontend:
    build:
      dockerfile: Dockerfile.dev
      args:
        - BUILD_ENV=development
        - NODE_ENV=development
    ports:
      - "5173:5173"  # Vite dev server port
    environment:
      - NODE_ENV=development
      - VITE_API_BASE_URL=http://localhost:8080/api
      - VITE_WS_BASE_URL=ws://localhost:8080/ws
    volumes:
      - ./frontend:/app:cached
      - /app/node_modules

  # Development overrides for flower
  flower:
    build:
      dockerfile: Dockerfile.dev
    volumes:
      - ./backend:/app:cached